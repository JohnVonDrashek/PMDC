# Rooms

Room generators and room component tags. Room generators define the shape and contents of individual rooms, while components tag rooms for filtering by other generation steps.

## Overview

Rooms are generated by `RoomGen<T>` subclasses that propose sizes, define connectable borders, and draw tiles. Room components are lightweight tags attached to room plans that identify room types for later filtering.

## Key Concepts

### Room Components

Components are tags attached to `FloorRoomPlan`:
```csharp
// Check if room has component
plan.Components.Contains<BossRoom>()

// Add component to room
plan.Components.Set(new BossRoom());
```

Common uses:
- `BossRoom` - Exclude from monster houses, mark for sealing
- `NoEventRoom` - Prevent shops/houses after already placed
- `ConnectivityRoom` - Ensure room remains accessible

### RoomGen Pattern

Room generators implement:
```csharp
// Propose room dimensions
Loc ProposeSize(IRandom rand)

// Prepare connectable borders
void PrepareSize(IRandom rand, Loc size)

// Render room to map
void DrawOnMap(T map)
```

### RoomGenOasis

Creates cave rooms with water oasis:
- Uses cellular automata for cave shape
- Flood-fills interior with water terrain
- Leaves outer border as walkable shore
- Spawns treasure items on the shore

Properties:
- `WaterTerrain` - Tile type for water
- `ItemAmount` - Number of items to spawn
- `Treasures` - Item spawn table

### RoomGenWaterRing

Creates rooms with island treasure:
- Rectangular room with padding
- Ring of water around center
- Dry island in middle with items
- All items protected by water barrier

Properties:
- `PadWidth/PadHeight` - Extra space around ring
- `WaterTerrain` - Tile type for water
- `ItemAmount` - Items on the island
- `Treasures` - Item spawn table

### RoomGenLoadEvo

Loads evolution rooms from map files:
- Reads pre-designed map layout
- Places tiles, items, enemies, decorations
- Applies post-processing masks around evo tile
- Supports border detection from walkable tiles

## Related

- [../FloorPlan/](../FloorPlan/) - Room layout algorithms
- [../Seals/](../Seals/) - Room locking by component
- [../](../) - Other generation steps
